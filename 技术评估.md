# 播客管理系统技术评估

## 评估目标

选择一个开源项目作为baseline，后续集成：
- 音频转录 (Whisper)
- AI摘要生成 (LLM)
- 智能推荐等AI功能

---

## 候选项目对比

| 维度 | Audiobookshelf | Winds | Podgrab |
|------|----------------|-------|---------|
| **GitHub** | 11.2k stars | 8.8k stars | 1.1k stars |
| **维护状态** | 活跃 (2024.12) | 已停更 | 停更 (2022.07) |
| **技术栈** | Node.js + Vue | React + Express + MongoDB | Go + SQLite |
| **数据库** | SQLite | MongoDB + Redis | SQLite |
| **Docker** | 有 | 有 | 有 |
| **Web UI** | 精美卡片式 | 精美卡片式 | 简单卡片式 |
| **播客订阅** | 有 | 有 | 有 |
| **自动更新** | 有 | 有 | 有 |
| **播放器** | 内置 | 内置 | 内置 |
| **移动App** | iOS + Android | Electron桌面 | 无 |
| **多用户** | 完整权限系统 | 有 | 基础 |
| **代码复杂度** | 高 | 非常高 | 中等 |
| **外部依赖** | 少 | 多 (Stream, Algolia, SendGrid) | 无 |

---

## 详细分析

### 1. Audiobookshelf

**优点：**
- 活跃维护，社区强大
- 功能完整，开箱即用
- 有iOS/Android App
- 纯本地部署，无外部API依赖

**缺点：**
- 代码量大 (6275+ commits)，改动成本高
- 主要面向有声书场景，播客是次要功能
- Vue 2 + Nuxt 架构，前端较重

**AI集成难度：中高**
```
需要在 server/ 目录添加：
1. 转录worker (调用Whisper)
2. 摘要生成API
3. 前端展示transcript/summary
改动涉及: server/, client/, 数据库schema
```

---

### 2. Winds

**优点：**
- UI设计最美观
- 架构清晰 (api/ + app/ 分离)
- 有完整的RSS/Podcast解析模块
- 使用MongoDB，schema灵活

**缺点：**
- **已停止维护** (官方声明)
- 强依赖外部服务 (Stream, Algolia, SendGrid)
- 配置复杂，需要多个API Key
- 最后更新2020年，依赖过时

**AI集成难度：高**
```
问题：
1. 项目已死，无社区支持
2. 外部依赖太多，部署困难
3. 依赖版本过旧，安全风险
不推荐作为baseline
```

---

### 3. Podgrab

**优点：**
- Go语言，性能好，二进制部署简单
- 代码量小，易于理解
- 无外部依赖
- SQLite轻量

**缺点：**
- 已停止维护 (2022.07)
- 功能相对简单
- Go生态AI库较少

**AI集成难度：中**
```
Go调用Python/Whisper需要：
1. 子进程调用
2. 或gRPC服务
生态不如Python/Node.js方便
```

---

## 综合评估矩阵

| 评估项 (权重) | Audiobookshelf | Winds | Podgrab | 自建 |
|--------------|----------------|-------|---------|------|
| 维护状态 (25%) | 10 | 0 | 2 | 10 |
| AI集成友好度 (25%) | 6 | 4 | 5 | 10 |
| 代码可控性 (20%) | 4 | 3 | 6 | 10 |
| 功能完整度 (15%) | 10 | 9 | 6 | 3 |
| 部署难度 (15%) | 8 | 3 | 9 | 7 |
| **加权总分** | **7.15** | **3.55** | **5.35** | **8.35** |

---

## 我的建议

### 结论：自建 > Audiobookshelf > Podgrab > Winds

### 推荐方案：自建轻量版

**理由：**

1. **Winds已死** - 官方明确不再维护，不推荐
2. **Audiobookshelf太重** - 6000+ commits，改一个功能要理解整个系统
3. **Podgrab停更+Go生态** - AI集成不便

**自建的优势：**
- 完全可控，想改什么改什么
- 技术栈自选 (Python/Node.js，AI生态好)
- 只实现需要的功能，不带历史包袱
- 参考三个项目的优秀设计

---

## 自建方案架构

### 参考各项目优点

| 来源 | 借鉴内容 |
|------|----------|
| Audiobookshelf | 卡片式UI设计、播放器组件 |
| Winds | MongoDB schema设计、RSS解析逻辑 |
| Podgrab | 简洁的订阅管理流程 |
| podcast-txt | Flask架构、转录集成 |

### 技术栈选择

```
后端: Python (Flask/FastAPI)
     - feedparser (RSS解析)
     - faster-whisper (转录)
     - 本地LLM (摘要)

前端: HTML + TailwindCSS + Alpine.js
     - 轻量级，无需构建
     - 卡片式响应布局

数据库: MongoDB (127.0.0.1:27017)
     - 灵活schema
     - 你本地已有
```

### 核心功能模块

```
podcast-manager/
|-- app.py                 # Flask主应用
|-- models/
|   |-- feed.py            # RSS源模型
|   |-- episode.py         # 单集模型
|   |-- transcript.py      # 转录模型
|-- services/
|   |-- rss_service.py     # RSS解析服务
|   |-- download_service.py # 音频下载
|   |-- transcribe_service.py # 转录服务
|   |-- summary_service.py # 摘要生成
|-- templates/
|   |-- index.html         # 订阅管理页
|   |-- episodes.html      # 单集列表
|   |-- detail.html        # 详情+转录+摘要
|-- static/
|   |-- css/tailwind.css
|-- scheduler.py           # 定时更新任务
```

### MongoDB Schema设计

```javascript
// feeds 集合
{
  _id: ObjectId,
  title: "Lex Fridman Podcast",
  rss_url: "https://lexfridman.com/feed/podcast/",
  image: "https://...",
  description: "...",
  last_checked: ISODate,
  last_updated: ISODate,
  episode_count: 450,
  status: "active" // active, paused, error
}

// episodes 集合
{
  _id: ObjectId,
  feed_id: ObjectId,
  guid: "unique-id",
  title: "Episode Title",
  published: ISODate,
  audio_url: "https://...",
  duration: 3600,
  status: "new" // new, downloaded, transcribed, summarized
}

// transcripts 集合
{
  _id: ObjectId,
  episode_id: ObjectId,
  text: "Full transcript...",
  segments: [
    { start: 0, end: 5.2, text: "Hello..." }
  ],
  created_at: ISODate
}

// summaries 集合
{
  _id: ObjectId,
  episode_id: ObjectId,
  tldr: "一句话总结",
  key_points: ["要点1", "要点2"],
  tags: ["AI", "Tech"],
  chinese_summary: "中文摘要",
  created_at: ISODate
}
```

---

## 开发路线图

### Phase 1: 订阅管理 (基础)
- [ ] Flask应用骨架
- [ ] 添加/删除RSS源
- [ ] 卡片式UI展示订阅
- [ ] 手动刷新获取新集

### Phase 2: 自动更新
- [ ] APScheduler定时任务
- [ ] 增量检测新集
- [ ] 状态追踪 (new/downloaded/...)

### Phase 3: 转录集成
- [ ] Faster-Whisper本地转录
- [ ] 转录结果存储
- [ ] 前端展示transcript

### Phase 4: AI摘要
- [ ] 接入本地LLM (参考D:\zz\try.py)
- [ ] 生成结构化摘要
- [ ] 中文翻译

### Phase 5: 高级功能
- [ ] 搜索功能
- [ ] 标签/分类
- [ ] 导出到Notion

---

## 快速启动代码

如果你决定自建，我可以立即生成一个最小可用版本：

```python
# 约200行代码实现：
# - Flask Web界面
# - 添加/查看RSS订阅
# - 卡片式UI (TailwindCSS)
# - MongoDB存储
```

---

## 结论

| 选项 | 推荐度 | 适用场景 |
|------|--------|----------|
| **自建** | 强烈推荐 | 需要深度AI集成 |
| Audiobookshelf | 备选 | 只需基础订阅管理，不改代码 |
| Podgrab | 不推荐 | 已停更 |
| Winds | 不推荐 | 已死项目 |

**我的建议：自建一个轻量版，参考现有项目的优秀设计，完全可控，方便后续AI扩展。**

需要我开始写自建版本的代码吗？
